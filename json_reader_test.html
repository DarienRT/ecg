<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="./js/FileSaver.js"></script>
    <title>Title</title>
</head>
<body>
<div>
    <input type="file" id="files"/><br>
    <input type="button" id="export" value="保存"/>
</div>

<script>
    let inputElement = document.getElementById("files");
    inputElement.addEventListener("change", handleFiles, false);
    function handleFiles() {
        let selectedFile = document.getElementById("files").files[0];//获取读取的File对象
        let name = selectedFile.name;//读取选中文件的文件名
        let size = selectedFile.size;//读取选中文件的大小
        console.log("File Name:"+name+"Size："+size);
        let reader = new FileReader();//这里是核心！！！读取操作就是由它完成的。
        reader.readAsText(selectedFile);//读取文件的内容

        reader.onload = function(){
            console.log("Reading Result：", this.result);//当读取完成之后会回调这个函数，然后此时文件的内容存储到了result中。直接操作即可。
            let result = this.result;
            console.log("Json Format Display：");
            let json = JSON.parse(result);
            console.log("id:" + json.data[0].id);
        };

    }

    let button = document.getElementById("save_file");
    button.addEventListener("click", saveHandler, false);
    function saveHandler(){
        let data = {
            name:"hanmeimei",
            age:88
        };
        let content = JSON.stringify(data);
        let blob = new Blob([content], {type: "text/plain;charset=utf-8"});
        saveAs(blob, "save.json");
    }
</script>
</body>
</html>